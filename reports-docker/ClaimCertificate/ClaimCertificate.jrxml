<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.2.1.final using JasperReports Library version 6.2.1  -->
<!-- 2017-08-30T15:12:36 -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Claim certificate" pageWidth="595" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="535" leftMargin="30" rightMargin="30" topMargin="20" bottomMargin="20" resourceBundle="Bundle" uuid="985fe8fc-59be-4ab1-adfa-106164917efc">
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="One Empty Record"/>
	<property name="ireport.jasperserver.url" value="http://localhost:8090/jasperserver/"/>
	<property name="ireport.jasperserver.user" value="jasperadmin"/>
	<property name="ireport.jasperserver.report.resource" value="/reports/Reports/community_server/certificate/ClaimCertificate_"/>
	<property name="ireport.jasperserver.reportUnit" value="/reports/Reports/community_server/certificate"/>
	<property name="com.jaspersoft.studio.unit." value="pixel"/>
	<property name="com.jaspersoft.studio.unit.pageHeight" value="cm"/>
	<property name="com.jaspersoft.studio.unit.pageWidth" value="cm"/>
	<property name="com.jaspersoft.studio.unit.columnWidth" value="cm"/>
	<parameter name="lang" class="java.lang.String">
		<parameterDescription><![CDATA[Language code]]></parameterDescription>
		<defaultValueExpression><![CDATA["en-us"]]></defaultValueExpression>
	</parameter>
	<parameter name="id" class="java.lang.String">
		<parameterDescription><![CDATA[Claim id]]></parameterDescription>
	</parameter>
	<parameter name="imageUrl" class="java.lang.String">
		<parameterDescription><![CDATA[URL of the service to generate map image]]></parameterDescription>
	</parameter>
	<parameter name="communityName" class="java.lang.String">
		<parameterDescription><![CDATA[]]></parameterDescription>
		<defaultValueExpression><![CDATA["Test"]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT c.id,
	c.nr,
	c.lodgement_date,
	c.challenge_expiry_date,
	c.decision_date,
	c.description,
	c.challenged_claim_id,
	c.claimant_id,
	c.mapped_geometry,
	c.gps_geometry,
	c.status_code,
	get_translation(s.display_value, $P{lang}) as status_name,
	c.recorder_name,
	(select coalesce(first_name, '') || ' ' || coalesce(last_name, '') from system.appuser where username = c.recorder_name limit 1) as full_recorder_name,
	c.type_code,
	get_translation(t.display_value, $P{lang}) as type_name,
	c.start_date,
	c.land_use_code,
	get_translation(lt.display_value, $P{lang}) as landuse_name,
	c.notes,
	c.north_adjacency,
	c.south_adjacency,
	c.east_adjacency,
	c.west_adjacency,
	c.assignee_name,
	c.rejection_reason_code,
	c.claim_area
FROM ((opentenure.claim c LEFT JOIN administrative.rrr_type t ON c.type_code = t.code)
  LEFT JOIN cadastre.land_use_type lt ON c.land_use_code = lt.code)
    LEFT JOIN opentenure.claim_status s ON c.status_code = s.code

WHERE c.id = $P{id}]]>
	</queryString>
	<field name="id" class="java.lang.String"/>
	<field name="nr" class="java.lang.String"/>
	<field name="lodgement_date" class="java.sql.Timestamp"/>
	<field name="challenge_expiry_date" class="java.sql.Timestamp"/>
	<field name="decision_date" class="java.sql.Timestamp"/>
	<field name="description" class="java.lang.String"/>
	<field name="challenged_claim_id" class="java.lang.String"/>
	<field name="claimant_id" class="java.lang.String"/>
	<field name="mapped_geometry" class="java.lang.Object"/>
	<field name="gps_geometry" class="java.lang.Object"/>
	<field name="status_code" class="java.lang.String"/>
	<field name="status_name" class="java.lang.String"/>
	<field name="recorder_name" class="java.lang.String"/>
	<field name="full_recorder_name" class="java.lang.String"/>
	<field name="type_code" class="java.lang.String"/>
	<field name="type_name" class="java.lang.String"/>
	<field name="start_date" class="java.sql.Date"/>
	<field name="land_use_code" class="java.lang.String"/>
	<field name="landuse_name" class="java.lang.String"/>
	<field name="notes" class="java.lang.String"/>
	<field name="north_adjacency" class="java.lang.String"/>
	<field name="south_adjacency" class="java.lang.String"/>
	<field name="east_adjacency" class="java.lang.String"/>
	<field name="west_adjacency" class="java.lang.String"/>
	<field name="assignee_name" class="java.lang.String"/>
	<field name="rejection_reason_code" class="java.lang.String"/>
	<field name="claim_area" class="java.lang.Long"/>
	<background>
		<band height="784" splitType="Stretch">
			<printWhenExpression><![CDATA[!$F{status_code}.equalsIgnoreCase("moderated")]]></printWhenExpression>
			<textField>
				<reportElement x="3" y="138" width="528" height="111" forecolor="#D4D4D4" uuid="0930037c-273f-4a27-9a57-56ed66ba36a3">
					<printWhenExpression><![CDATA[!$F{status_code}.equalsIgnoreCase("moderated")]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None">
					<font size="55" isBold="true" isStrikeThrough="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$R{not_approved}]]></textFieldExpression>
			</textField>
		</band>
	</background>
	<title>
		<band height="101" splitType="Stretch">
			<textField>
				<reportElement x="150" y="16" width="410" height="32" uuid="1a837209-d209-41f6-bf41-500d3eea52a6"/>
				<textElement>
					<font size="24"/>
				</textElement>
				<textFieldExpression><![CDATA[$R{header}]]></textFieldExpression>
			</textField>
			<image scaleImage="RetainShape">
				<reportElement x="5" y="3" width="120" height="89" uuid="0b1fd974-a2a0-4f90-8136-e1ed17cb315f">
					<property name="com.jaspersoft.studio.unit.x" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.y" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.width" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<imageExpression><![CDATA["logo.png"]]></imageExpression>
			</image>
			<textField>
				<reportElement x="150" y="50" width="410" height="34" uuid="ab91210b-8387-471b-aef0-1115c96fb336"/>
				<textElement>
					<font size="20" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["#" + $F{nr}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement x="0" y="97" width="540" height="1" forecolor="#01638A" uuid="8a92f998-7955-4248-ae35-b6ff05c84819"/>
				<graphicElement>
					<pen lineWidth="2.0" lineStyle="Double"/>
				</graphicElement>
			</line>
		</band>
	</title>
	<detail>
		<band height="564" splitType="Stretch">
			<subreport>
				<reportElement positionType="Float" x="5" y="154" width="525" height="40" uuid="92246e2a-5557-4469-a1ce-30343851b1bb"/>
				<subreportParameter name="claim_id">
					<subreportParameterExpression><![CDATA[$F{id}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="lang">
					<subreportParameterExpression><![CDATA[$P{lang}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA["Shares.jrxml"]]></subreportExpression>
			</subreport>
			<textField isStretchWithOverflow="true">
				<reportElement x="7" y="10" width="523" height="20" uuid="175e13b0-380c-4085-922b-873860af648c"/>
				<textElement>
					<font fontName="SansSerif" size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[String.format($R{text1},$P{communityName})]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement positionType="Float" x="20" y="38" width="180" height="18" uuid="39ae948f-714b-42a9-ad8e-90f526ed127a"/>
				<textElement>
					<font fontName="SansSerif" size="14" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$R{land_name}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement positionType="Float" x="20" y="60" width="180" height="18" uuid="9fcf31cd-a82e-4fb8-9d2c-c89cbde5a235"/>
				<textElement>
					<font fontName="SansSerif" size="14" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$R{tenure_right}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement positionType="Float" x="20" y="82" width="180" height="18" uuid="eca44d2c-f830-4e42-bc47-aa43db6ce8fb"/>
				<textElement>
					<font fontName="SansSerif" size="14" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$R{land_use}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement positionType="Float" x="20" y="104" width="180" height="18" uuid="449acede-e6cd-46bc-8c1c-ce1f364af044">
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<textElement>
					<font fontName="SansSerif" size="14" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$R{held_since}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement positionType="Float" x="210" y="38" width="320" height="17" uuid="311b0f35-78d6-4d58-8958-ceafcf4cd389"/>
				<textElement>
					<font fontName="SansSerif" size="12" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[T($F{description})]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement positionType="Float" x="7" y="133" width="523" height="20" uuid="6f8d9d3c-a437-4bd4-a468-f73fc5a03874"/>
				<textElement>
					<font fontName="SansSerif" size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[$R{text2}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement positionType="Float" x="210" y="60" width="320" height="17" uuid="40909b2e-3cae-453a-848e-f3c1aee7bbc9"/>
				<textElement>
					<font fontName="SansSerif" size="12" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[T($F{type_name})]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement positionType="Float" x="210" y="82" width="320" height="17" uuid="f2befa5e-4d7b-43ad-842e-59b18d073207"/>
				<textElement>
					<font fontName="SansSerif" size="12" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[T($F{landuse_name})]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="MMMM d, yyyy">
				<reportElement positionType="Float" x="210" y="104" width="320" height="17" uuid="b5a89a10-b560-4f91-a969-1bf335fde8de"/>
				<textElement>
					<font fontName="SansSerif" size="12" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[($F{lodgement_date} == null ? "" : $F{lodgement_date})]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement positionType="Float" x="7" y="209" width="180" height="20" uuid="5892ce63-6207-428f-bcc7-d5bbe7726532"/>
				<textElement>
					<font fontName="SansSerif" size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$R{land_plan}]]></textFieldExpression>
			</textField>
			<image scaleImage="RealSize" hAlign="Center" vAlign="Middle" isUsingCache="false" isLazy="true" evaluationTime="Report">
				<reportElement positionType="Float" x="7" y="229" width="523" height="330" uuid="c65d308e-eebc-43d4-8a39-9507f420dcf9">
					<property name="com.jaspersoft.studio.unit.width" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<imageExpression><![CDATA[$P{imageUrl} + "?id=" + $P{id} + "&width=700&height=400&=drawscale=true&scalelabel=" + $R{scale}]]></imageExpression>
			</image>
		</band>
	</detail>
	<lastPageFooter>
		<band height="63">
			<line>
				<reportElement x="5" y="58" width="530" height="1" uuid="1c478a6b-bea3-4192-8ac0-e25563cbf388"/>
			</line>
			<textField isStretchWithOverflow="true">
				<reportElement positionType="Float" x="5" y="38" width="155" height="20" uuid="8b3d2e2c-c74d-462d-9b49-d807d2a422f0"/>
				<textElement>
					<font fontName="SansSerif" size="12" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$R{date}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement x="5" y="29" width="530" height="1" uuid="2ffaadb3-0e91-41c9-9247-a3eeb63c9760"/>
				<graphicElement>
					<pen lineStyle="Solid"/>
				</graphicElement>
			</line>
			<textField isStretchWithOverflow="true">
				<reportElement positionType="Float" x="5" y="8" width="155" height="21" uuid="b0666809-4460-4470-a402-22542e114f93"/>
				<textElement>
					<font fontName="SansSerif" size="12" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$R{community_head}]]></textFieldExpression>
			</textField>
		</band>
	</lastPageFooter>
</jasperReport>
